<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mesaages</title>
    <link rel="stylesheet" href="/Customer/Dashboard/message.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="/Images/logo-col.png" type="image/x-icon">
</head>

<body>
    <header>
        <div class="logo">
            <svg width="43" height="43" viewBox="0 0 43 43" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M28.6613 4.20108e-05C24.8672 0.000302291 21.2286 1.49464 18.5458 4.15438C15.863 6.81412 14.3557 10.4214 14.3554 14.1829V14.5166H0V43H29.1068V28.3559C32.8663 28.2488 36.432 26.6781 39.032 23.9837C41.6319 21.2894 43.0568 17.6883 42.9983 13.96C42.9397 10.2317 41.4023 6.67635 38.719 4.0636C36.0357 1.45085 32.4224 -0.00902793 28.6613 4.20108e-05ZM4.95014 38.0924V19.4241H14.3554V28.3657H24.1567V38.0924H4.95014ZM29.1068 23.4483C28.9583 23.4581 28.8098 23.4581 28.6613 23.4581H19.3055V14.1829C19.3057 12.3672 19.8433 10.5916 20.8518 9.076C21.8603 7.56045 23.2952 6.37165 24.9788 5.65701C26.6624 4.94236 28.5205 4.7333 30.3227 5.05573C32.125 5.37816 33.7922 6.21791 35.1176 7.47087C36.443 8.72382 37.3684 10.3349 37.7789 12.1043C38.1895 13.8737 38.0672 15.7237 37.4272 17.4249C36.7872 19.126 35.6577 20.6036 34.1786 21.6743C32.6996 22.745 30.9361 23.3619 29.1068 23.4483Z"
                    fill="#345ADC" />
            </svg>
            <h2>Appointify</h2>
        </div>
        <nav>
            <ul>
                <li><a href="/Customer/index.html" class="nav-link ">Home</a></li>
                <li><a href="/Customer/service.html" class="nav-link">Services</a></li>
                <li><a href="/Customer/about.html" class="nav-link">About Us</a></li>
                <li><a href="/Customer/contact.html" class="nav-link">Contact Us</a></li>
                <li><a href="/Customer/test.html" class="nav-link">Testimonies</a></li>
            </ul>
            <div class="prof-summary prof-summary2">
                <div class="cust-img"></div>
                <div class="cust-name-summary">Hi, Abiodun</div>
                <i class="fa-solid fa-chevron-down spin"></i>
                <div class="user-drop-down user-drop-down2">
                    <div class="drop-cont">
                        <p><a href="../Dashboard/profile.html" class="drop-link">Profile</a></p>
                        <p><a href="../Dashboard/history.html" class="drop-link">Booking</a></p>
                        <p><a href="#" class="drop-link">Messages</a></p>
                        <p><button class="user-log-out-btn">Log Out</button></p>
                    </div>
                </div>
            </div>
        </nav>
        <div class="profile-block">
            <div class="noti-block-cont">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12.0196 2.91016C8.7096 2.91016 6.0196 5.60016 6.0196 8.91016V11.8002C6.0196 12.4102 5.7596 13.3402 5.4496 13.8602L4.2996 15.7702C3.5896 16.9502 4.0796 18.2602 5.3796 18.7002C9.6896 20.1402 14.3396 20.1402 18.6496 18.7002C19.8596 18.3002 20.3896 16.8702 19.7296 15.7702L18.5796 13.8602C18.2796 13.3402 18.0196 12.4102 18.0196 11.8002V8.91016C18.0196 5.61016 15.3196 2.91016 12.0196 2.91016Z"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" />
                    <path
                        d="M13.8699 3.19994C13.5599 3.10994 13.2399 3.03994 12.9099 2.99994C11.9499 2.87994 11.0299 2.94994 10.1699 3.19994C10.4599 2.45994 11.1799 1.93994 12.0199 1.93994C12.8599 1.93994 13.5799 2.45994 13.8699 3.19994Z"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path
                        d="M15.0195 19.0601C15.0195 20.7101 13.6695 22.0601 12.0195 22.0601C11.1995 22.0601 10.4395 21.7201 9.89953 21.1801C9.35953 20.6401 9.01953 19.8801 9.01953 19.0601"
                        stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10" />
                </svg>
                <div class="noti-dot"></div>
            </div>
            <div class="prof-summary">
                <div class="cust-img"></div>
                <div class="cust-name-summary">Hi, Abiodun</div>
                <i class="fa-solid fa-chevron-down spin"></i>
                <div class="user-drop-down">
                    <div class="drop-cont">
                        <p><a href="../Dashboard/profile.html" class="drop-link">Profile</a></p>
                        <p><a href="../Dashboard/history.html" class="drop-link">Booking</a></p>
                        <p><a href="#" class="drop-link">Messages</a></p>
                        <p><button class="user-log-out-btn">Log Out</button></p>
                    </div>
                </div>
            </div>
            <div class="bar"><i class="fa-solid fa-bars bar-tog"></i></div>
        </div>
    </header>
    <div class="modal"></div>




    <div class="mes-cont">
        <div class="mes-rev-cont">
            <h2>People</h2>
            <div class="mes-rev-block">
                <div class="mes-item" id="no-conversations-msg">
                    <p>Loading conversations...</p>
                </div>
            </div>
        </div>
        <div class="mes-chat-cont">
            <div class="mes-box">
                <div class="mes-box-header">
                    <div class="mes-box-prof">
                        <div class="mes-box-prof-img"></div>
                        <div class="mes-box-name">
                            <h2>Abiodun</h2>
                            <p>Online - Last seen, 2:02pm</p>
                        </div>
                    </div>
                    <div class="mes-box-tool">
                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M10.0485 9.9435C8.17077 11.5395 7.48302 14.4497 9.10352 16.7842C10.6263 18.9739 12.5274 20.8744 14.7175 22.3965C17.052 24.017 19.9623 23.3293 21.5583 21.4515L21.5758 21.4602C23.614 22.405 25.7776 23.0516 28 23.38V28H27.993C14.0385 28.0193 3.48427 17.3443 3.50002 3.507V3.5H8.12002V3.50175C8.44902 5.72425 9.09652 7.88725 10.0398 9.92425L10.0485 9.94175V9.9435ZM28 31.5H29.75C30.2142 31.5 30.6593 31.3156 30.9875 30.9874C31.3156 30.6593 31.5 30.2141 31.5 29.75V21.8715C31.5004 21.4517 31.3498 21.0457 31.0758 20.7277C30.8018 20.4096 30.4225 20.2007 30.0073 20.139L28.5128 19.9185C26.6222 19.6379 24.7817 19.0875 23.0475 18.284L21.7298 17.6733C21.3597 17.5018 20.9415 17.465 20.5472 17.5692C20.1529 17.6733 19.8074 17.9119 19.5703 18.2437L18.9735 19.0785C18.4503 19.8118 17.451 20.034 16.7143 19.5212C14.8671 18.2372 13.2635 16.6342 11.9788 14.7875C11.466 14.049 11.69 13.0498 12.4215 12.5283L13.2563 11.9333C13.5885 11.6961 13.8274 11.3503 13.9315 10.9556C14.0357 10.5609 13.9987 10.1422 13.8268 9.772L13.2143 8.4525C12.4116 6.71815 11.8618 4.87768 11.5815 2.98725L11.3593 1.49275C11.2976 1.0775 11.0886 0.698266 10.7706 0.424236C10.4525 0.150205 10.0466 -0.000361836 9.62677 6.52995e-07H1.75002C1.28589 6.52995e-07 0.840771 0.184375 0.512582 0.512564C0.184393 0.840752 1.89425e-05 1.28587 1.89425e-05 1.75V3.50175C-0.0174811 19.264 12.0925 31.5228 27.9983 31.5H28Z"
                                fill="#0015A5" />
                        </svg>
                        <svg width="36" height="27" viewBox="0 0 36 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M6 0C4.4087 0 2.88258 0.632141 1.75736 1.75736C0.632141 2.88258 0 4.4087 0 6V21C0 22.5913 0.632141 24.1174 1.75736 25.2426C2.88258 26.3679 4.4087 27 6 27H21C22.5913 27 24.1174 26.3679 25.2426 25.2426C26.3679 24.1174 27 22.5913 27 21V19.5L32.4 23.55C32.7343 23.8007 33.1318 23.9534 33.5479 23.9909C33.9641 24.0284 34.3825 23.9493 34.7562 23.7625C35.13 23.5756 35.4443 23.2883 35.664 22.9329C35.8836 22.5774 36 22.1679 36 21.75V5.25C36 4.83215 35.8836 4.42255 35.664 4.0671C35.4443 3.71166 35.13 3.42441 34.7562 3.23754C34.3825 3.05067 33.9641 2.97157 33.5479 3.00909C33.1318 3.04662 32.7343 3.19929 32.4 3.45L27 7.5V6C27 4.4087 26.3679 2.88258 25.2426 1.75736C24.1174 0.632141 22.5913 0 21 0H6ZM27 11.25L33 6.75V20.25L27 15.75V11.25ZM24 6V21C24 21.7956 23.6839 22.5587 23.1213 23.1213C22.5587 23.6839 21.7956 24 21 24H6C5.20435 24 4.44129 23.6839 3.87868 23.1213C3.31607 22.5587 3 21.7956 3 21V6C3 5.20435 3.31607 4.44129 3.87868 3.87868C4.44129 3.31607 5.20435 3 6 3H21C21.7956 3 22.5587 3.31607 23.1213 3.87868C23.6839 4.44129 24 5.20435 24 6Z"
                                fill="#0015A5" />
                        </svg>
                        <svg width="8" height="27" viewBox="0 0 8 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.5 28.75C7.5 29.7446 7.10491 30.6984 6.40165 31.4017C5.69839 32.1049 4.74456 32.5 3.75 32.5C2.75544 32.5 1.80161 32.1049 1.09835 31.4017C0.395088 30.6984 0 29.7446 0 28.75C0 27.7554 0.395088 26.8016 1.09835 26.0983C1.80161 25.3951 2.75544 25 3.75 25C4.74456 25 5.69839 25.3951 6.40165 26.0983C7.10491 26.8016 7.5 27.7554 7.5 28.75ZM7.5 16.25C7.5 17.2446 7.10491 18.1984 6.40165 18.9017C5.69839 19.6049 4.74456 20 3.75 20C2.75544 20 1.80161 19.6049 1.09835 18.9017C0.395088 18.1984 0 17.2446 0 16.25C0 15.2554 0.395088 14.3016 1.09835 13.5983C1.80161 12.8951 2.75544 12.5 3.75 12.5C4.74456 12.5 5.69839 12.8951 6.40165 13.5983C7.10491 14.3016 7.5 15.2554 7.5 16.25ZM7.5 3.75C7.5 4.74456 7.10491 5.69839 6.40165 6.40165C5.69839 7.10491 4.74456 7.5 3.75 7.5C2.75544 7.5 1.80161 7.10491 1.09835 6.40165C0.395088 5.69839 0 4.74456 0 3.75C0 2.75544 0.395088 1.80161 1.09835 1.09835C1.80161 0.395088 2.75544 0 3.75 0C4.74456 0 5.69839 0.395088 6.40165 1.09835C7.10491 1.80161 7.5 2.75544 7.5 3.75Z"
                                fill="#0015A5" />
                        </svg>
                    </div>
                </div>
                <div class="mes-box-body" id="chat-messages-container">
                </div>
                <div class="mes-box-footer">
                    <div class="mes-inp-cont">
                        <input type="file" class="mes-file-up" multiple id="mes-file-upload">
                        <label for="mes-file-upload" class="mes-file-upload">
                            <svg width="28" height="32" viewBox="0 0 28 32" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M24.8268 2.89775C20.9631 -0.965918 14.6713 -0.965918 10.8118 2.89775L0.106679 13.5946C0.0369522 13.6644 3.79185e-05 13.7587 3.79185e-05 13.8571C3.79185e-05 13.9556 0.0369522 14.0499 0.106679 14.1196L1.62016 15.6331C1.68934 15.702 1.78298 15.7407 1.8806 15.7407C1.97823 15.7407 2.07187 15.702 2.14105 15.6331L12.8461 4.93623C14.175 3.60732 15.9428 2.87725 17.8213 2.87725C19.6998 2.87725 21.4676 3.60732 22.7924 4.93623C24.1213 6.26514 24.8514 8.03291 24.8514 9.90732C24.8514 11.7858 24.1213 13.5495 22.7924 14.8784L11.8823 25.7845L10.1145 27.5522C8.46156 29.2052 5.77504 29.2052 4.12211 27.5522C3.3223 26.7524 2.88344 25.6901 2.88344 24.5581C2.88344 23.4261 3.3223 22.3638 4.12211 21.564L14.9461 10.744C15.2209 10.4733 15.5819 10.3216 15.9674 10.3216H15.9715C16.3571 10.3216 16.7139 10.4733 16.9846 10.744C17.2594 11.0188 17.4071 11.3798 17.4071 11.7653C17.4071 12.1468 17.2553 12.5077 16.9846 12.7784L8.13754 21.6173C8.06781 21.687 8.0309 21.7813 8.0309 21.8798C8.0309 21.9782 8.06781 22.0726 8.13754 22.1423L9.65101 23.6558C9.72019 23.7246 9.81384 23.7633 9.91146 23.7633C10.0091 23.7633 10.1027 23.7246 10.1719 23.6558L19.0149 14.8128C19.8311 13.9966 20.2782 12.9138 20.2782 11.7612C20.2782 10.6087 19.827 9.52178 19.0149 8.70967C17.3291 7.02392 14.5893 7.02803 12.9036 8.70967L11.8536 9.76377L2.08363 19.5296C1.42054 20.1888 0.894911 20.9731 0.537241 21.837C0.179572 22.7009 -0.0030256 23.6272 3.79185e-05 24.5622C3.79185e-05 26.4612 0.742421 28.2454 2.08363 29.5866C3.47406 30.9729 5.29516 31.6661 7.11625 31.6661C8.93734 31.6661 10.7584 30.9729 12.1448 29.5866L24.8268 16.9128C26.693 15.0425 27.7266 12.5528 27.7266 9.90732C27.7307 7.25771 26.6971 4.76807 24.8268 2.89775Z"
                                    fill="#333333" />
                            </svg>
                        </label>
                        <input type="text" class="mesage-content" id="message-input"
                            placeholder="Type your message here" />
                        <svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M10.75 10.75C10.3936 10.75 10.0518 10.8916 9.79983 11.1436C9.54782 11.3956 9.40625 11.7374 9.40625 12.0938C9.40625 12.4501 9.26468 12.7919 9.01267 13.0439C8.76067 13.2959 8.41888 13.4375 8.0625 13.4375C7.70612 13.4375 7.36433 13.2959 7.11233 13.0439C6.86032 12.7919 6.71875 12.4501 6.71875 12.0938C6.71875 11.0246 7.14347 9.99923 7.89948 9.24323C8.65548 8.48722 9.68085 8.0625 10.75 8.0625C11.8192 8.0625 12.8445 8.48722 13.6005 9.24323C14.3565 9.99923 14.7812 11.0246 14.7812 12.0938C14.7812 12.4501 14.6397 12.7919 14.3877 13.0439C14.1357 13.2959 13.7939 13.4375 13.4375 13.4375C13.0811 13.4375 12.7393 13.2959 12.4873 13.0439C12.2353 12.7919 12.0938 12.4501 12.0938 12.0938C12.0938 11.7374 11.9522 11.3956 11.7002 11.1436C11.4482 10.8916 11.1064 10.75 10.75 10.75ZM21.5 10.75C21.1436 10.75 20.8018 10.8916 20.5498 11.1436C20.2978 11.3956 20.1562 11.7374 20.1562 12.0938C20.1562 12.4501 20.0147 12.7919 19.7627 13.0439C19.5107 13.2959 19.1689 13.4375 18.8125 13.4375C18.4561 13.4375 18.1143 13.2959 17.8623 13.0439C17.6103 12.7919 17.4688 12.4501 17.4688 12.0938C17.4688 11.0246 17.8935 9.99923 18.6495 9.24323C19.4055 8.48722 20.4308 8.0625 21.5 8.0625C22.5692 8.0625 23.5945 8.48722 24.3505 9.24323C25.1065 9.99923 25.5312 11.0246 25.5312 12.0938C25.5312 12.4501 25.3897 12.7919 25.1377 13.0439C24.8857 13.2959 24.5439 13.4375 24.1875 13.4375C23.8311 13.4375 23.4893 13.2959 23.2373 13.0439C22.9853 12.7919 22.8438 12.4501 22.8438 12.0938C22.8438 11.7374 22.7022 11.3956 22.4502 11.1436C22.1982 10.8916 21.8564 10.75 21.5 10.75ZM6.81281 16.125C6.62047 16.125 6.43038 16.1663 6.25538 16.2462C6.08038 16.326 5.92456 16.4424 5.79844 16.5877C5.67232 16.7329 5.57885 16.9035 5.52435 17.088C5.46984 17.2724 5.45557 17.4664 5.4825 17.6569C5.84763 20.2193 7.12505 22.564 9.08013 24.2603C11.0352 25.9565 13.5367 26.8904 16.125 26.8904C18.7133 26.8904 21.2148 25.9565 23.1699 24.2603C25.1249 22.564 26.4024 20.2193 26.7675 17.6569C26.7945 17.4662 26.7801 17.272 26.7255 17.0873C26.6708 16.9027 26.5771 16.7319 26.4507 16.5867C26.3243 16.4414 26.1681 16.325 25.9928 16.2453C25.8175 16.1657 25.6271 16.1246 25.4345 16.125H6.81281ZM16.125 24.1875C14.4572 24.1876 12.8303 23.6708 11.4683 22.7082C10.1063 21.7457 9.07605 20.3847 8.51937 18.8125H23.7306C23.1739 20.3847 22.1437 21.7457 20.7817 22.7082C19.4197 23.6708 17.7928 24.1876 16.125 24.1875ZM32.25 16.125C32.25 14.0074 31.8329 11.9106 31.0226 9.95423C30.2122 7.99785 29.0244 6.22025 27.5271 4.7229C26.0298 3.22556 24.2521 2.0378 22.2958 1.22744C20.3394 0.417086 18.2426 0 16.125 0C14.0074 0 11.9106 0.417086 9.95423 1.22744C7.99785 2.0378 6.22025 3.22556 4.7229 4.7229C3.22556 6.22025 2.0378 7.99785 1.22744 9.95423C0.417085 11.9106 -3.15542e-08 14.0074 0 16.125C6.37265e-08 20.4016 1.69888 24.5031 4.7229 27.5271C7.74693 30.5511 11.8484 32.25 16.125 32.25C20.4016 32.25 24.5031 30.5511 27.5271 27.5271C30.5511 24.5031 32.25 20.4016 32.25 16.125ZM2.6875 16.125C2.6875 12.5612 4.10323 9.14327 6.62325 6.62325C9.14327 4.10323 12.5612 2.6875 16.125 2.6875C19.6888 2.6875 23.1067 4.10323 25.6267 6.62325C28.1468 9.14327 29.5625 12.5612 29.5625 16.125C29.5625 19.6888 28.1468 23.1067 25.6267 25.6267C23.1067 28.1468 19.6888 29.5625 16.125 29.5625C12.5612 29.5625 9.14327 28.1468 6.62325 25.6267C4.10323 23.1067 2.6875 19.6888 2.6875 16.125Z"
                                fill="#333333" />
                        </svg>
                    </div>
                    <button class="cha-send-btn">
                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12.6804 5.64018L24.0937 11.3468C29.2137 13.9068 29.2137 18.0935 24.0937 20.6535L12.6804 26.3602C5.00035 30.2002 1.86702 27.0535 5.70702 19.3868L6.86702 17.0802C7.16035 16.4935 7.16035 15.5202 6.86702 14.9335L5.70702 12.6135C1.86702 4.94685 5.01369 1.80018 12.6804 5.64018Z"
                                stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M7.25391 16H14.4539" stroke="white" stroke-width="1.5" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>










    <footer>
        <div class="footer-cont">
            <div class="foot-logo">
                <svg width="43" height="43" viewBox="0 0 43 43" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M28.6613 4.20108e-05C24.8672 0.000302291 21.2286 1.49464 18.5458 4.15438C15.863 6.81412 14.3557 10.4214 14.3554 14.1829V14.5166H0V43H29.1068V28.3559C32.8663 28.2488 36.432 26.6781 39.032 23.9837C41.6319 21.2894 43.0568 17.6883 42.9983 13.96C42.9397 10.2317 41.4023 6.67635 38.719 4.0636C36.0357 1.45085 32.4224 -0.00902793 28.6613 4.20108e-05ZM4.95014 38.0924V19.4241H14.3554V28.3657H24.1567V38.0924H4.95014ZM29.1068 23.4483C28.9583 23.4581 28.8098 23.4581 28.6613 23.4581H19.3055V14.1829C19.3057 12.3672 19.8433 10.5916 20.8518 9.076C21.8603 7.56045 23.2952 6.37165 24.9788 5.65701C26.6624 4.94236 28.5205 4.7333 30.3227 5.05573C32.125 5.37816 33.7922 6.21791 35.1176 7.47087C36.443 8.72382 37.3684 10.3349 37.7789 12.1043C38.1895 13.8737 38.0672 15.7237 37.4272 17.4249C36.7872 19.126 35.6577 20.6036 34.1786 21.6743C32.6996 22.745 30.9361 23.3619 29.1068 23.4483Z"
                        fill="white" />
                </svg>
                <h2>Appointify</h2>
            </div>
            <div class="foot-item">
                <h2>Quick Links</h2>
                <div class="foot-nav">
                    <a href="/Customer/index.html" class="foot">Home</a>
                    <a href="/Customer/service.html" class="foot">Service</a>
                    <a href="/Customer/about.html" class="foot">About Us</a>
                    <a href="/Customer/contact.html" class="foot">Contact Us</a>
                    <a href="/Customer/test.html" class="foot">Testimonials</a>
                </div>
            </div>
            <div class="foot-item">
                <h2>Download App</h2>
                <div class="foot-nav">
                    <p class="app-foot">
                        <svg width="17" height="20" viewBox="0 0 17 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12.7916 6.96187L9.90685 10.0005L12.792 13.0381L16.3347 10.9189C16.818 10.6293 17 10.2861 17 9.99976C17 9.71348 16.8181 9.37049 16.3349 9.08135L12.7916 6.96187Z"
                                fill="#8EA3EB" />
                            <path
                                d="M9.18256 9.99976L0.130387 0.469323C0.050182 0.646069 0 0.878344 0 1.17015V18.8298C0 19.1222 0.050186 19.3543 0.130417 19.5309L9.18256 9.99976Z"
                                fill="#8EA3EB" />
                            <path
                                d="M1.54233 0.233388L12.2606 6.64507L9.54714 9.50188L0.563356 0.042673C0.808497 -0.0437826 1.13919 -0.00780021 1.54233 0.233388Z"
                                fill="#8EA3EB" />
                            <path
                                d="M0.562695 19.9572C0.807823 20.0438 1.1387 20.0079 1.54231 19.7669L12.2603 13.3546L9.54779 10.4974L8.5459 11.5523L0.562695 19.9572Z"
                                fill="#8EA3EB" />
                        </svg>
                        <a href="#" class="foot">Google Play</a>
                    </p>
                    <p class="app-foot">
                        <svg width="17" height="20" viewBox="0 0 17 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M14.1988 10.6359C14.2196 9.09202 15.0859 7.63115 16.4601 6.82249C15.5931 5.6374 14.1411 4.88602 12.6303 4.84078C11.019 4.67889 9.45691 5.76366 8.63581 5.76366C7.79882 5.76366 6.53461 4.85685 5.17326 4.88366C3.3988 4.93853 1.74456 5.90417 0.881248 7.38906C-0.974531 10.4644 0.409713 14.9841 2.18739 17.47C3.0768 18.6873 4.11627 20.047 5.47639 19.9988C6.80735 19.9459 7.30444 19.1864 8.91102 19.1864C10.5027 19.1864 10.9691 19.9988 12.3568 19.9681C13.785 19.9459 14.6848 18.7454 15.543 17.5166C16.182 16.6493 16.6738 15.6907 17 14.6763C15.3216 13.9969 14.2008 12.3802 14.1988 10.6359Z"
                                fill="#8EA3EB" />
                            <path
                                d="M11.5776 3.20595C12.3564 2.31119 12.74 1.16113 12.6471 0C11.4574 0.1196 10.3585 0.663834 9.56924 1.52426C8.79749 2.36494 8.39586 3.49477 8.47179 4.61152C9.66191 4.62325 10.8319 4.09376 11.5776 3.20595Z"
                                fill="#8EA3EB" />
                        </svg>
                        <a href="#" class="foot">Apple Store</a>
                    </p>
                    <p class="app-foot">
                        <svg width="21" height="18" viewBox="0 0 21 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M1.90909 0C0.854729 0 0 0.826551 0 1.84615V12.9231C0 13.9427 0.854729 14.7692 1.90909 14.7692H19.0909C20.1453 14.7692 21 13.9427 21 12.9231V1.84615C21 0.826551 20.1453 0 19.0909 0H1.90909Z"
                                fill="#8EA3EB" />
                            <path
                                d="M5.72727 17.3077C5.72727 16.9253 6.05602 16.6154 6.46154 16.6154H14.5385C14.944 16.6154 15.2727 16.9253 15.2727 17.3077C15.2727 17.69 14.944 18 14.5385 18H6.46154C6.05601 18 5.72727 17.69 5.72727 17.3077Z"
                                fill="#8EA3EB" />
                        </svg>
                        <a href="#" class="foot">Desktop</a>
                    </p>
                </div>
            </div>
            <div class="foot-item">
                <h3>Join a Newsletter</h3>

                <div class="inp-new">
                    <label for="email">Your Email</label>
                    <div class="news-group">
                        <input type="email" name="" id="" placeholder="Enter Your Email" required>
                        <button class="news-btn">Subscribe</button>
                    </div>
                </div>


            </div>
        </div>
        <hr class="rule">
        <div class="foot-low-cont">
            <div class="foot-low-item">
                <p>Copyright &copy; Appointify</p>
            </div>
            <div class="foot-low-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M12 2C15.87 2 19 5.13 19 9C19 14.25 12 22 12 22C12 22 5 14.25 5 9C5 5.13 8.13 2 12 2ZM7 9C7 11.85 9.92 16.21 12 18.88C14.12 16.19 17 11.88 17 9C17 6.24 14.76 4 12 4C9.24 4 7 6.24 7 9ZM12 11.5C10.6193 11.5 9.5 10.3807 9.5 9C9.5 7.61929 10.6193 6.5 12 6.5C13.3807 6.5 14.5 7.61929 14.5 9C14.5 10.3807 13.3807 11.5 12 11.5Z"
                        fill="#3A86FF" />
                </svg>
                <p>8819 Ohio St. South Gate, CA 90280</p>
            </div>
            <div class="foot-low-item">
                <svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M20 2C20 0.9 19.1 0 18 0H2C0.9 0 0 0.9 0 2V14C0 15.1 0.9 16 2 16H18C19.1 16 20 15.1 20 14V2ZM18 2L10 7L2 2H18ZM18 14H2V4L10 9L18 4V14Z"
                        fill="#3A86FF" />
                </svg>
                <a href="mailto:Support@appointify.com" class="mail">Support@appointify.com</a>
            </div>
            <div class="foot-low-item">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M3.54 2C3.6 2.89 3.75 3.76 3.99 4.59L2.79 5.79C2.38 4.59 2.12 3.32 2.03 2H3.54ZM13.4 14.02C14.25 14.26 15.12 14.41 16 14.47V15.96C14.68 15.87 13.41 15.61 12.2 15.21L13.4 14.02ZM4.5 0H1C0.45 0 0 0.45 0 1C0 10.39 7.61 18 17 18C17.55 18 18 17.55 18 17V13.51C18 12.96 17.55 12.51 17 12.51C15.76 12.51 14.55 12.31 13.43 11.94C13.33 11.9 13.22 11.89 13.12 11.89C12.86 11.89 12.61 11.99 12.41 12.18L10.21 14.38C7.38 12.93 5.06 10.62 3.62 7.79L5.82 5.59C6.1 5.31 6.18 4.92 6.07 4.57C5.7 3.45 5.5 2.25 5.5 1C5.5 0.45 5.05 0 4.5 0Z"
                        fill="#3A86FF" />
                </svg>
                <a href="tel:+234 123 456 7890" class="mail">+234 123 456 7890</a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script src="/DefaultScript/api-service.js"></script>
    <script>
        'use strict';

        var currentBookingId = null;
        var currentUserId = null;
        var isSending = false;

        try {
            var userStr = localStorage.getItem('user');
            if (userStr) {
                var parsed = JSON.parse(userStr);
                currentUserId = parsed._id || parsed.id;
            }
        } catch (e) { }

        function safeText(str) {
            if (!str) return '';
            return String(str);
        }

        function formatTime(dateStr) {
            if (!dateStr) return '';
            var d = new Date(dateStr);
            if (isNaN(d.getTime())) return '';
            return d.toLocaleString('en-US', { month: 'short', day: 'numeric', hour: 'numeric', minute: '2-digit' });
        }

        var avatarColors = ['#345ADC','#E85D75','#2BBFA0','#F5A623','#8B5CF6','#EC4899','#10B981','#F59E0B'];

        function getInitials(name) {
            if (!name) return '?';
            var parts = name.trim().split(/\s+/);
            if (parts.length === 1) return parts[0].charAt(0).toUpperCase();
            return (parts[0].charAt(0) + parts[parts.length - 1].charAt(0)).toUpperCase();
        }

        function getAvatarColor(name) {
            var idx = 0;
            if (name) for (var i = 0; i < name.length; i++) idx += name.charCodeAt(i);
            return avatarColors[idx % avatarColors.length];
        }

        function setAvatar(el, name, imageUrl) {
            el.textContent = '';
            el.style.backgroundImage = '';
            if (imageUrl) {
                el.style.backgroundImage = "url('" + imageUrl + "')";
                el.style.backgroundSize = 'cover';
                el.style.backgroundPosition = 'center';
                el.style.backgroundColor = '';
            } else {
                el.style.backgroundColor = getAvatarColor(name);
                el.textContent = getInitials(name);
                el.style.display = 'flex';
                el.style.alignItems = 'center';
                el.style.justifyContent = 'center';
                el.style.color = '#fff';
                el.style.fontWeight = '700';
                el.style.fontSize = '18px';
            }
        }

        // ── Conversation list ──────────────────────────────────────────────
        async function loadConversations() {
            var token = localStorage.getItem('token');
            if (!token) return;
            var container = document.querySelector('.mes-rev-block');
            if (!container) return;
            container.textContent = '';

            var conversations = [];
            var bookings = [];
            try { conversations = await ApiService.getConversations(); } catch (e) { conversations = []; }
            try { bookings = await ApiService.getMyBookings(); } catch (e) { bookings = []; }

            // Normalise both to arrays in case the API wraps them
            if (!Array.isArray(conversations)) conversations = conversations && (conversations.conversations || conversations.data || []);
            if (!Array.isArray(bookings))       bookings       = bookings       && (bookings.bookings       || bookings.data       || []);
            if (!Array.isArray(conversations)) conversations = [];
            if (!Array.isArray(bookings))       bookings       = [];

            var items = [];
            var seenBookingIds = {};

            // 1. Conversations from API (have actual messages)
            conversations.forEach(function(conv) {
                var bkg     = conv.booking     || {};
                var bkgId   = (typeof bkg === 'object') ? (bkg._id || '') : String(bkg || '');
                var biz     = (typeof bkg === 'object') ? (bkg.business || {}) : {};
                var bizName = (typeof biz === 'object' && biz) ? (biz.name || 'Business') : 'Business';
                var bizImg  = (typeof biz === 'object' && biz) ? (biz.image || biz.profileImage || biz.profileImg || null) : null;
                var lastMsg = conv.lastMessage || {};
                items.push({
                    bookingId:       bkgId,
                    name:            bizName,
                    image:           bizImg,
                    lastMessage:     (typeof lastMsg === 'object') ? (lastMsg.content  || '') : String(lastMsg || ''),
                    lastMessageTime: (typeof lastMsg === 'object') ? (lastMsg.createdAt || '') : '',
                    unreadCount:     conv.unreadCount || 0,
                    status:          (typeof bkg === 'object') ? (bkg.status || '') : ''
                });
                if (bkgId) seenBookingIds[bkgId] = true;
            });

            // 2. Bookings without a conversation yet — customer can still open the chat
            bookings.filter(function(b) {
                return (b.status || '').toLowerCase() !== 'cancelled';
            }).forEach(function(booking) {
                var bId = booking._id || booking.id;
                if (!bId || seenBookingIds[bId]) return;
                var buss    = booking.business || {};
                var busName = (typeof buss === 'object' && buss) ? (buss.name    || 'Business') : 'Business';
                var busImg  = (typeof buss === 'object' && buss) ? (buss.image || buss.profileImage || buss.profileImg || null) : null;
                items.push({
                    bookingId:       bId,
                    name:            busName,
                    image:           busImg,
                    lastMessage:     'Booking ' + (booking.status || 'pending'),
                    lastMessageTime: booking.date || booking.createdAt || '',
                    unreadCount:     0,
                    status:          booking.status || 'pending'
                });
                seenBookingIds[bId] = true;
            });

            if (items.length === 0) {
                var empty = document.createElement('p');
                empty.textContent = 'No conversations yet. Book a service to start chatting.';
                empty.style.padding = '20px';
                container.appendChild(empty);
                return;
            }

            items.forEach(function(item) {
                var el   = document.createElement('div');
                el.className = 'mes-item';
                el.style.cursor = 'pointer';

                var prof = document.createElement('div');
                prof.className = 'mes-prof';

                var imgDiv = document.createElement('div');
                imgDiv.className = 'mes-img';
                setAvatar(imgDiv, item.name, item.image);

                var nameDiv = document.createElement('div');
                nameDiv.className = 'mes-name';

                var textDiv = document.createElement('div');
                textDiv.className = 'mes-text';
                var nameP = document.createElement('p');
                nameP.textContent = safeText(item.name);
                var lastP = document.createElement('p');
                lastP.className = 'mes';
                lastP.textContent = safeText(item.lastMessage || 'No messages yet');
                textDiv.appendChild(nameP);
                textDiv.appendChild(lastP);

                var dayDiv = document.createElement('div');
                dayDiv.className = 'mes-day';
                var timeP = document.createElement('p');
                timeP.className = 'mes-time';
                timeP.textContent = formatTime(item.lastMessageTime);
                var countP = document.createElement('p');
                countP.className = 'mes-count';
                if (item.unreadCount > 0) countP.textContent = item.unreadCount;
                dayDiv.appendChild(timeP);
                dayDiv.appendChild(countP);

                nameDiv.appendChild(textDiv);
                nameDiv.appendChild(dayDiv);
                prof.appendChild(imgDiv);
                prof.appendChild(nameDiv);
                el.appendChild(prof);

                (function(bookingId, contactName, contactImg) {
                    el.addEventListener('click', function() {
                        document.querySelectorAll('.mes-item').forEach(function(i) { i.style.background = ''; });
                        el.style.background = '#f0f4ff';
                        loadChat(bookingId, contactName, contactImg);
                    });
                })(item.bookingId, item.name, item.image);

                container.appendChild(el);
            });
        }

        // ── Chat view ──────────────────────────────────────────────────────
        async function loadChat(bookingId, contactName, contactImg) {
            if (!bookingId) return;
            currentBookingId = bookingId;

            // Update header
            var headerName   = document.querySelector('.mes-box-name h2');
            var headerStatus = document.querySelector('.mes-box-name p');
            var headerAvatar = document.querySelector('.mes-box-prof-img');
            if (headerName)   headerName.textContent = safeText(contactName);
            if (headerStatus) headerStatus.textContent = '';
            if (headerAvatar) setAvatar(headerAvatar, contactName, contactImg);

            var chatBody = document.getElementById('chat-messages-container');
            if (!chatBody) return;
            chatBody.textContent = 'Loading…';

            try {
                var messages = await ApiService.getMessages(bookingId);
                // Normalise in case of wrapped response
                if (!Array.isArray(messages)) messages = messages && (messages.messages || messages.data || []);
                if (!Array.isArray(messages)) messages = [];

                renderMessages(messages, chatBody);

                // Mark incoming as read
                var unreadIds = messages
                    .filter(function(m) { return !m.isRead && m.senderType !== 'client'; })
                    .map(function(m) { return m._id; });
                if (unreadIds.length > 0) {
                    ApiService.markMessagesAsRead(unreadIds).catch(function(){});
                }
            } catch (err) {
                chatBody.textContent = 'Could not load messages.';
                return;
            }

            // Join WebSocket room
            if (typeof connectToChat === 'function') {
                if (typeof socket !== 'undefined' && socket && socket.connected) {
                    if (typeof openChat === 'function') openChat(bookingId);
                } else {
                    connectToChat();
                    var attempts = 0;
                    var poll = setInterval(function() {
                        attempts++;
                        if (typeof socket !== 'undefined' && socket && socket.connected) {
                            clearInterval(poll);
                            if (typeof openChat === 'function') openChat(bookingId);
                        } else if (attempts >= 20) {
                            clearInterval(poll);
                        }
                    }, 500);
                }
            }
        }

        function renderMessages(messages, container) {
            container.textContent = '';
            if (!messages || messages.length === 0) {
                var p = document.createElement('p');
                p.textContent = 'No messages yet. Start the conversation!';
                p.style.cssText = 'padding:20px;text-align:center;color:#888';
                container.appendChild(p);
                return;
            }
            messages.forEach(function(msg) { appendMessageEl(msg, container); });
            container.scrollTop = container.scrollHeight;
        }

        function appendMessageEl(msg, container) {
            // Remove empty-state placeholder if present
            var ph = container.querySelector('p');
            if (ph && container.children.length === 1) container.removeChild(ph);

            var div = document.createElement('div');
            var senderId = (msg.sender && typeof msg.sender === 'object') ? msg.sender._id : msg.sender;
            var isMine   = (senderId && senderId === currentUserId) || msg.senderType === 'client';
            div.className = 'message-show ' + (isMine ? 'customer' : 'bus-owner');

            var textP = document.createElement('p');
            textP.className = 'message-text';
            textP.textContent = safeText(msg.content || '');

            var timeSpan = document.createElement('span');
            timeSpan.className = 'message-time';
            timeSpan.textContent = formatTime(msg.createdAt);

            div.appendChild(textP);
            div.appendChild(timeSpan);
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        // ── Send ───────────────────────────────────────────────────────────
        document.addEventListener('DOMContentLoaded', function() {
            var sendBtn  = document.querySelector('.cha-send-btn');
            var msgInput = document.getElementById('message-input');
            if (sendBtn)  sendBtn.addEventListener('click', function(e) { e.preventDefault(); sendChatMessage(); });
            if (msgInput) msgInput.addEventListener('keydown', function(e) { if (e.key === 'Enter') { e.preventDefault(); sendChatMessage(); } });
        });

        async function sendChatMessage() {
            if (isSending) return;
            if (!currentBookingId) { alert('Select a conversation first.'); return; }
            var input = document.getElementById('message-input');
            if (!input) return;
            var text = input.value.trim();
            if (!text) return;

            isSending = true;
            input.value = '';
            input.focus();

            // Optimistic render
            var chatBody = document.getElementById('chat-messages-container');
            appendMessageEl({ content: text, sender: currentUserId, senderType: 'client', createdAt: new Date().toISOString() }, chatBody);

            // Prefer WebSocket; fall back to REST
            var wsSent = false;
            try {
                if (typeof window.sendMessage === 'function' &&
                    typeof socket !== 'undefined' && socket && socket.connected &&
                    typeof wsCurrentBookingId !== 'undefined' && wsCurrentBookingId === currentBookingId) {
                    window.sendMessage(text);
                    wsSent = true;
                }
            } catch (e) {}

            if (!wsSent) {
                try {
                    await ApiService.sendMessage({ bookingId: currentBookingId, content: text, senderType: 'client' });
                } catch (e) {
                    console.error('Message send failed:', e);
                }
            }

            isSending = false;
        }

        // ── Real-time incoming messages ────────────────────────────────────
        // websocket.js already appends the message via displayIncomingMessage;
        // we only need to refresh the sidebar unread counts.
        document.addEventListener('ws:message', function(e) {
            var msg = e.detail;
            if (!msg) return;
            // If the incoming message is for a DIFFERENT booking, just refresh sidebar
            var incomingBkgId = (msg.booking && typeof msg.booking === 'object') ? msg.booking._id : msg.booking;
            if (incomingBkgId && incomingBkgId !== currentBookingId) {
                loadConversations();
            }
            // If it's for the current chat, websocket.js displayIncomingMessage already
            // appended it — nothing else to do here.
        });

        loadConversations();
    </script>
    <script src="/DefaultScript/customer.js"></script>
    <script src="/DefaultScript/websocket.js"></script>
</body>

</html>